{
  "id": "snapshot_1765717903776_2hff7vv3e",
  "approvalId": "approval_1765717879450_2cmwb4qwt",
  "approvalTitle": "Inventory Backend API - Requirements Document",
  "version": 2,
  "timestamp": "2025-12-14T13:11:43.776Z",
  "trigger": "approved",
  "status": "pending",
  "content": "# Requirements Document - Inventory Backend API\n\n## Introduction\n\nThe **Inventory Backend API** provides comprehensive backend services for hospital drug inventory management with real-time stock tracking, FIFO/FEFO lot management, and complete audit trails. This API serves as the core backend for the Inventory Management system, managing:\n\n- **Real-time Stock Tracking**: Multi-location inventory with min/max/reorder point management\n- **FIFO/FEFO Lot Management**: Complete lot traceability with expiry date tracking\n- **Stock Movements**: Receipts, distributions, transfers, and adjustments\n- **Expiry Management**: Automated alerts and quarantine of expired drugs\n- **Audit Trail**: Immutable transaction log for all inventory movements\n\n**Value to Users:**\n- Pharmacists can track stock levels in real-time across all locations\n- Warehouse staff can manage stock receipts with automatic lot creation\n- Inventory managers can perform stock adjustments with full audit trails\n- Finance officers can access accurate inventory valuation for reporting\n- System administrators can configure min/max levels and reorder points\n- Department staff can view available stock before requesting distributions\n\n## Alignment with Product Vision\n\nThis feature supports the **INVS Modern** vision of a comprehensive hospital drug inventory management system by:\n\n1. **Real-time Stock Visibility**: Eliminates manual stock counting and provides instant stock status across all hospital locations\n2. **FIFO/FEFO Compliance**: Ensures proper drug rotation and minimizes waste from expired medications\n3. **Integrated Workflows**: Seamless data flow from Procurement (receipts) to Distribution (dispensing) with automatic inventory updates\n4. **Ministry Compliance**: Supports DMSIC 2568 INVENTORY export (15 fields) for regulatory reporting\n5. **Audit Trail Integrity**: Complete transaction history for internal audits and regulatory compliance\n6. **Cost Management**: Accurate inventory valuation using weighted average cost for financial reporting\n\n**Technical Alignment:**\n- Follows AegisX platform standards (TypeBox schemas, Fastify routes, service layer pattern)\n- Implements domain-driven design in `inventory/operations` domain\n- Uses PostgreSQL schema `inventory` with 3 core tables\n- Integrates with Procurement API for receipt posting\n- Integrates with Distribution API for FIFO/FEFO dispensing\n- Uses database functions for complex business logic (FIFO/FEFO selection)\n\n**Integration Points:**\n- **Procurement → Inventory**: Receipt posting creates lots and updates stock\n- **Distribution → Inventory**: Stock reduction using FIFO/FEFO logic\n- **Drug Return → Inventory**: Stock increase from department returns\n- **Master Data → Inventory**: Drugs and locations reference data\n\n## Requirements\n\n### Phase 1: Stock Inquiry (Week 1)\n\n#### REQ-1: List Stock Levels\n\n**User Story:** As a pharmacist, I want to view current stock levels for all drugs at my location, so that I can quickly identify what's in stock and what needs reordering.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/inventory/stock` **THEN** system **SHALL** return paginated list of inventory records\n2. **WHEN** `locationId` query parameter provided **THEN** system **SHALL** filter by location\n3. **WHEN** `drugId` query parameter provided **THEN** system **SHALL** filter by drug\n4. **WHEN** `belowMin=true` query parameter provided **THEN** system **SHALL** filter items where `quantity_on_hand <= min_level`\n5. **WHEN** `search` query parameter provided **THEN** system **SHALL** search by drug trade name or drug code\n6. **WHEN** stock data returned **THEN** system **SHALL** include drug details (code, name, unit), location details (code, name), and stock metrics (quantity, min, max, reorder point)\n7. **WHEN** stock data returned **THEN** system **SHALL** calculate stock status (OK, LOW, CRITICAL, OVERSTOCK) based on min/max levels\n8. **IF** user has department restriction **THEN** system **SHALL** filter to show only authorized locations\n\n#### REQ-2: Get Specific Stock Level\n\n**User Story:** As a warehouse staff member, I want to check the exact stock level for a specific drug at a specific location, so that I can verify availability before processing distribution requests.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/inventory/stock/:drugId/:locationId` **THEN** system **SHALL** return single inventory record\n2. **IF** inventory record not found **THEN** system **SHALL** return 404 with error code `STOCK_NOT_FOUND`\n3. **WHEN** stock data returned **THEN** system **SHALL** include drug details, location details, stock levels, cost information (average_cost, last_cost)\n4. **WHEN** stock data returned **THEN** system **SHALL** calculate days of supply based on average daily usage from last 90 days\n5. **WHEN** stock data returned **THEN** system **SHALL** include stock value (quantity × average_cost)\n6. **WHEN** stock data returned **THEN** system **SHALL** include reorder recommendation based on reorder point\n\n#### REQ-3: List Active Lots\n\n**User Story:** As a pharmacist, I want to view all active lots for a drug, so that I can see expiry dates and plan FIFO/FEFO dispensing.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/drug-lots` with `drugId` and `locationId` **THEN** system **SHALL** return list of active lots\n2. **WHEN** `orderBy=FIFO` parameter provided **THEN** system **SHALL** order by `received_date ASC` (oldest first)\n3. **WHEN** `orderBy=FEFO` parameter provided **THEN** system **SHALL** order by `expiry_date ASC` (expiring soonest first)\n4. **WHEN** `orderBy` not provided **THEN** system **SHALL** default to FIFO order\n5. **WHEN** `includeExpired=false` (default) **THEN** system **SHALL** filter to active lots only\n6. **WHEN** lot data returned **THEN** system **SHALL** include lot number, manufacture date, expiry date, quantity available, unit cost\n7. **WHEN** lot data returned **THEN** system **SHALL** calculate days until expiry and expiry status (OK, WARN, CRITICAL, EXPIRED)\n8. **WHEN** lot data returned **THEN** system **SHALL** include utilization percentage (dispensed / received)\n\n#### REQ-4: Get Expiring Lots\n\n**User Story:** As an inventory manager, I want to see all lots expiring within a specified timeframe, so that I can plan to use them before expiry and minimize waste.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/drug-lots/expiring` **THEN** system **SHALL** return lots expiring within 180 days (default)\n2. **WHEN** `daysThreshold` parameter provided **THEN** system **SHALL** filter lots expiring within specified days\n3. **WHEN** `locationId` parameter provided **THEN** system **SHALL** filter by location\n4. **WHEN** expiring lots returned **THEN** system **SHALL** include drug details, location details, lot information, and remaining quantity\n5. **WHEN** expiring lots returned **THEN** system **SHALL** calculate days until expiry and expiry status\n6. **WHEN** expiring lots returned **THEN** system **SHALL** calculate total value (quantity × unit_cost)\n7. **WHEN** expiring lots returned **THEN** system **SHALL** order by expiry date ascending (expiring soonest first)\n8. **WHEN** expiring lots returned **THEN** system **SHALL** include summary: total lots, total value, critical lots (< 3 months), warning lots (3-6 months)\n\n#### REQ-5: Get Lot Details\n\n**User Story:** As a pharmacist, I want to view complete details of a specific lot, so that I can verify lot number, expiry date, and remaining quantity before dispensing.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/drug-lots/:id` **THEN** system **SHALL** return complete lot details\n2. **IF** lot not found **THEN** system **SHALL** return 404 with error code `LOT_NOT_FOUND`\n3. **WHEN** lot details returned **THEN** system **SHALL** include all lot fields (lot number, dates, quantities, cost)\n4. **WHEN** lot details returned **THEN** system **SHALL** include related drug details with generic name\n5. **WHEN** lot details returned **THEN** system **SHALL** include location details\n6. **WHEN** lot details returned **THEN** system **SHALL** include source receipt information if available\n7. **WHEN** lot details returned **THEN** system **SHALL** calculate lot status (active, depleted, expired)\n\n### Phase 2: Stock Management (Week 2)\n\n#### REQ-6: Create Stock Adjustment\n\n**User Story:** As an inventory manager, I want to adjust stock quantities after physical count, so that system records match actual stock on hand.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `POST /api/inventory/operations/inventory-adjustments` **THEN** system **SHALL** validate that drug and location exist\n2. **WHEN** adjustment_type is \"SUBTRACT\" **AND** quantity > quantity_on_hand **THEN** system **SHALL** return 400 error `INSUFFICIENT_STOCK`\n3. **WHEN** adjustment is created **THEN** system **SHALL** update inventory `quantity_on_hand` (add or subtract)\n4. **WHEN** adjustment is created **THEN** system **SHALL** create inventory transaction record with type ADJUST\n5. **WHEN** adjustment is created **THEN** system **SHALL** record adjustment reason from `adjustment_reason_id` lookup\n6. **WHEN** adjustment is created **THEN** system **SHALL** record previous quantity, new quantity, and variance\n7. **WHEN** lot_id provided **THEN** system **SHALL** also update specific lot quantity proportionally\n8. **WHEN** adjustment is created **THEN** system **SHALL** include notes field for additional context\n9. **WHEN** adjustment completed **THEN** system **SHALL** return adjustment record with before/after quantities\n\n#### REQ-7: List Adjustment History\n\n**User Story:** As a finance officer, I want to view all stock adjustments with reasons, so that I can audit inventory discrepancies.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/inventory-adjustments` **THEN** system **SHALL** return paginated list of adjustments\n2. **WHEN** `drugId` parameter provided **THEN** system **SHALL** filter by drug\n3. **WHEN** `locationId` parameter provided **THEN** system **SHALL** filter by location\n4. **WHEN** `fromDate` and `toDate` parameters provided **THEN** system **SHALL** filter by date range\n5. **WHEN** adjustments returned **THEN** system **SHALL** include drug details, location details, adjustment type, quantity, reason\n6. **WHEN** adjustments returned **THEN** system **SHALL** include user who created adjustment\n7. **WHEN** adjustments returned **THEN** system **SHALL** order by created_at descending (newest first)\n\n#### REQ-8: Update Min/Max Levels\n\n**User Story:** As an inventory manager, I want to set minimum and maximum stock levels for drugs, so that the system can alert me when reordering is needed.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `PUT /api/inventory/operations/inventory/:id/min-max` **THEN** system **SHALL** validate that inventory record exists\n2. **WHEN** min_level > max_level **THEN** system **SHALL** return 400 error \"Min level cannot exceed max level\"\n3. **WHEN** reorder_point provided **AND** (reorder_point < min_level OR reorder_point > max_level) **THEN** system **SHALL** return 400 error \"Reorder point must be between min and max levels\"\n4. **WHEN** levels updated **THEN** system **SHALL** update inventory record with new min_level, max_level, reorder_point\n5. **WHEN** levels updated **THEN** system **SHALL** record update timestamp and user\n6. **WHEN** quantity_on_hand <= new min_level **THEN** system **SHALL** include warning in response\n\n#### REQ-9: Stock Transfer Between Locations\n\n**User Story:** As a warehouse supervisor, I want to transfer stock between locations, so that I can balance inventory across hospital departments.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `POST /api/inventory/operations/inventory-transfers` **THEN** system **SHALL** validate source and destination locations exist\n2. **WHEN** source and destination are same **THEN** system **SHALL** return 400 error \"Cannot transfer to same location\"\n3. **WHEN** transfer created **THEN** system **SHALL** check source location has sufficient quantity\n4. **IF** insufficient quantity at source **THEN** system **SHALL** return 400 error `INSUFFICIENT_STOCK`\n5. **WHEN** transfer created **THEN** system **SHALL** use FIFO logic to select lots from source using `get_fifo_lots()` function\n6. **WHEN** transfer created **THEN** system **SHALL** deduct quantity from source inventory\n7. **WHEN** transfer created **THEN** system **SHALL** add quantity to destination inventory (create if not exists)\n8. **WHEN** transfer created **THEN** system **SHALL** create new lots at destination with same lot numbers and expiry dates\n9. **WHEN** transfer created **THEN** system **SHALL** create two transaction records: TRANSFER_OUT at source, TRANSFER_IN at destination\n10. **WHEN** transfer created **THEN** system **SHALL** link transaction records via reference_id\n11. **WHEN** any step fails **THEN** system **SHALL** rollback all changes atomically\n\n### Phase 3: Reporting & Alerts (Week 3)\n\n#### REQ-10: Get Low Stock Items\n\n**User Story:** As a procurement officer, I want to see all items below reorder point, so that I can create purchase requests proactively.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/inventory/low-stock` **THEN** system **SHALL** return items where `quantity_on_hand <= reorder_point`\n2. **WHEN** `locationId` parameter provided **THEN** system **SHALL** filter by location\n3. **WHEN** `urgency=CRITICAL` parameter provided **THEN** system **SHALL** filter items where `quantity_on_hand < min_level`\n4. **WHEN** `urgency=LOW` parameter provided **THEN** system **SHALL** filter items where `quantity_on_hand <= reorder_point` but `>= min_level`\n5. **WHEN** low stock items returned **THEN** system **SHALL** include drug details, current stock, min/max levels, reorder quantity\n6. **WHEN** low stock items returned **THEN** system **SHALL** calculate days of supply based on 90-day average usage\n7. **WHEN** low stock items returned **THEN** system **SHALL** calculate suggested order quantity (max_level - quantity_on_hand)\n8. **WHEN** low stock items returned **THEN** system **SHALL** include last received date\n9. **WHEN** low stock items returned **THEN** system **SHALL** include summary: critical items count, low items count, total value needed\n\n#### REQ-11: Get Transaction History\n\n**User Story:** As an auditor, I want to view complete transaction history for a drug, so that I can trace all stock movements for compliance.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/inventory-transactions` **THEN** system **SHALL** return paginated transaction list\n2. **WHEN** `inventoryId` parameter provided **THEN** system **SHALL** filter by inventory record\n3. **WHEN** `drugId` and `locationId` parameters provided **THEN** system **SHALL** filter by drug/location combination\n4. **WHEN** `transactionType` parameter provided **THEN** system **SHALL** filter by type (RECEIVE, ISSUE, TRANSFER, ADJUST, RETURN)\n5. **WHEN** `fromDate` and `toDate` parameters provided **THEN** system **SHALL** filter by date range\n6. **WHEN** transactions returned **THEN** system **SHALL** include transaction type, quantity (+ or -), unit cost, reference info\n7. **WHEN** transactions returned **THEN** system **SHALL** include user who created transaction\n8. **WHEN** transactions returned **THEN** system **SHALL** order by created_at descending (newest first)\n9. **WHEN** transactions returned **THEN** system **SHALL** include drug and location details for context\n\n#### REQ-12: Get Stock Valuation Report\n\n**User Story:** As a finance manager, I want to see inventory valuation by location, so that I can report asset values for financial statements.\n\n##### Acceptance Criteria\n\n1. **WHEN** user calls `GET /api/inventory/operations/inventory/valuation` **THEN** system **SHALL** calculate total value per location using `quantity_on_hand × average_cost`\n2. **WHEN** `locationId` parameter provided **THEN** system **SHALL** filter to specific location\n3. **WHEN** `asOfDate` parameter provided **THEN** system **SHALL** calculate valuation as of that date (from transaction history)\n4. **WHEN** `asOfDate` not provided **THEN** system **SHALL** use current stock levels\n5. **WHEN** valuation returned **THEN** system **SHALL** group by location with subtotals\n6. **WHEN** valuation returned **THEN** system **SHALL** include drug count, total quantity, total value per location\n7. **WHEN** valuation returned **THEN** system **SHALL** include grand totals across all locations\n8. **WHEN** valuation returned **THEN** system **SHALL** support export to CSV/Excel format\n\n## Workflow Requirements\n\n### WF-1: Stock Receipt from Procurement\n\n**User Story:** As the system, I want to automatically update inventory when a receipt is posted in Procurement, so that stock levels are accurate without manual entry.\n\n#### Acceptance Criteria\n\n1. **WHEN** Procurement API posts receipt **THEN** system **SHALL** be notified via `update_inventory_from_receipt(receipt_id)` database function\n2. **WHEN** receipt posted **THEN** system **SHALL** create or update inventory record for each receipt item\n3. **WHEN** receipt posted **THEN** system **SHALL** create drug lot with lot number, expiry date, quantity, and unit cost\n4. **WHEN** receipt posted **THEN** system **SHALL** calculate new weighted average cost: `(old_qty × old_cost + new_qty × new_cost) / total_qty`\n5. **WHEN** receipt posted **THEN** system **SHALL** update last_cost to most recent receipt unit price\n6. **WHEN** receipt posted **THEN** system **SHALL** create inventory transaction record with type RECEIVE\n7. **WHEN** receipt posted **THEN** system **SHALL** execute all operations in single atomic transaction\n8. **IF** any step fails **THEN** system **SHALL** rollback all changes and return error to Procurement API\n\n### WF-2: FIFO/FEFO Dispensing to Distribution\n\n**User Story:** As the system, I want to automatically select lots using FIFO or FEFO logic when Distribution requests stock, so that proper drug rotation is enforced.\n\n#### Acceptance Criteria\n\n1. **WHEN** Distribution API requests stock **THEN** system **SHALL** call `get_fifo_lots(drug_id, location_id, quantity_needed)` function\n2. **WHEN** FEFO mode configured for drug **THEN** system **SHALL** call `get_fefo_lots()` instead\n3. **WHEN** lots selected **THEN** system **SHALL** deduct quantity from each lot in order until quantity fulfilled\n4. **WHEN** lot depleted (quantity_available = 0) **THEN** system **SHALL** set lot `is_active = FALSE`\n5. **WHEN** lots updated **THEN** system **SHALL** reduce inventory `quantity_on_hand`\n6. **WHEN** dispensing complete **THEN** system **SHALL** create inventory transaction record with type ISSUE\n7. **WHEN** dispensing complete **THEN** system **SHALL** return dispensed lot details to Distribution API\n8. **IF** insufficient stock **THEN** system **SHALL** return error without partial dispensing\n\n### WF-3: Expiry Management Workflow\n\n**User Story:** As the system, I want to automatically identify and quarantine expiring drugs, so that expired medications are not dispensed to patients.\n\n#### Acceptance Criteria\n\n1. **WHEN** daily scheduled job runs at 8:00 AM **THEN** system **SHALL** query lots expiring within 180 days\n2. **WHEN** lots expiring within 180-90 days found **THEN** system **SHALL** create INFO level alerts\n3. **WHEN** lots expiring within 90-30 days found **THEN** system **SHALL** create WARNING level alerts\n4. **WHEN** lots expiring within 30 days found **THEN** system **SHALL** create CRITICAL level alerts and block dispensing\n5. **WHEN** expired lots found **THEN** system **SHALL** automatically transfer to QUARANTINE location\n6. **WHEN** expired lot transferred **THEN** system **SHALL** set lot `is_active = FALSE`\n7. **WHEN** expired lot transferred **THEN** system **SHALL** create TRANSFER transaction to quarantine\n8. **WHEN** expiry alerts created **THEN** system **SHALL** send notifications to pharmacy managers\n\n## Integration Requirements\n\n### INT-1: Procurement Integration\n\n1. System **SHALL** provide database function `update_inventory_from_receipt(receipt_id)` callable from Procurement API\n2. Function **SHALL** handle all inventory updates, lot creation, and transaction logging atomically\n3. Function **SHALL** return boolean success/failure status\n4. System **SHALL** validate receipt items reference valid drugs and locations before processing\n\n### INT-2: Distribution Integration\n\n1. System **SHALL** provide API endpoint for stock availability check before distribution creation\n2. System **SHALL** provide database functions `get_fifo_lots()` and `get_fefo_lots()` for lot selection\n3. System **SHALL** allow Distribution API to specify preferred dispensing method (FIFO or FEFO)\n4. System **SHALL** validate requested quantity does not exceed available stock\n\n### INT-3: Budget Integration\n\n1. System **SHALL** provide inventory valuation data for budget planning\n2. System **SHALL** support reorder point calculations for automatic PR generation\n3. System **SHALL** provide average cost data for budget allocation by drug category\n\n### INT-4: Master Data Integration\n\n1. System **SHALL** validate all drug_id references exist in `inventory.drugs` table\n2. System **SHALL** validate all location_id references exist in `inventory.locations` table\n3. System **SHALL** enforce foreign key constraints for data integrity\n\n## Non-Functional Requirements\n\n### Code Architecture and Modularity\n\n- **Single Responsibility Principle**: Each service file handles one domain entity (inventory, drug_lots, transactions)\n- **Modular Design**: Separate controllers, services, and repositories with clear boundaries\n- **Dependency Management**: Use dependency injection for database, logger, and external services\n- **Clear Interfaces**: Define TypeBox schemas for all request/response contracts\n- **Domain-Driven Design**: Organize code in `apps/api/src/layers/inventory/operations` domain\n\n### Performance\n\n1. Stock level queries **SHALL** return results within 500ms for up to 10,000 inventory records\n2. FIFO/FEFO lot selection **SHALL** execute within 200ms using database function optimization\n3. Receipt posting workflow **SHALL** complete within 2 seconds for receipts with up to 50 line items\n4. Expiry check job **SHALL** process 100,000 lots within 5 minutes\n5. Database queries **SHALL** use appropriate indexes on `drug_id`, `location_id`, `expiry_date`, `received_date`\n\n### Security\n\n1. All endpoints **SHALL** require JWT authentication\n2. All endpoints **SHALL** implement role-based access control (RBAC):\n   - **ADMIN**: Full access to all endpoints\n   - **PHARMACIST**: Read stock, create adjustments, view transactions\n   - **INVENTORY_STAFF**: Read stock, create adjustments, transfers\n   - **DEPARTMENT_USER**: Read stock only for authorized locations\n   - **VIEWER**: Read-only access to stock levels\n3. Adjustment creation **SHALL** log user ID for audit trail\n4. Transfer operations **SHALL** verify user has access to both source and destination locations\n5. Sensitive operations **SHALL** implement rate limiting (100 requests per minute per user)\n\n### Reliability\n\n1. All stock movement operations **SHALL** use database transactions with rollback on failure\n2. Receipt posting **SHALL** implement idempotency to prevent duplicate lot creation\n3. System **SHALL** implement retry logic for transient database connection failures (max 3 retries)\n4. System **SHALL** log all errors with correlation IDs for troubleshooting\n5. System **SHALL** validate all input data using TypeBox schemas before processing\n\n### Data Integrity\n\n1. Inventory `quantity_on_hand` **SHALL** never be negative\n2. Lot `quantity_available` **SHALL** never exceed `quantity_received`\n3. All inventory transactions **SHALL** be immutable (no updates or deletes)\n4. FIFO/FEFO lot selection **SHALL** use database functions to ensure atomic updates\n5. Average cost calculations **SHALL** use DECIMAL type to prevent rounding errors\n\n### Monitoring and Logging\n\n1. System **SHALL** log all stock movements with timestamp, user, and reference\n2. System **SHALL** track API endpoint performance metrics (response time, error rate)\n3. System **SHALL** alert administrators when error rate exceeds 5% over 5-minute window\n4. System **SHALL** provide health check endpoint for monitoring tools\n5. System **SHALL** log expiry check job results with counts of processed/alerted lots\n\n### Scalability\n\n1. System **SHALL** support horizontal scaling with stateless API design\n2. Database connection pool **SHALL** support minimum 20 concurrent connections\n3. System **SHALL** implement pagination for all list endpoints (default 50, max 200 records)\n4. System **SHALL** cache frequently accessed master data (drugs, locations) for 5 minutes\n5. System **SHALL** support future sharding by location_id for multi-hospital deployments\n\n## Success Criteria\n\n1. All 12 API endpoints implemented with 100% test coverage\n2. All 5 workflows functional with integration tests\n3. FIFO/FEFO logic verified with lot rotation tests\n4. Receipt posting workflow completes in < 2 seconds\n5. Stock query performance < 500ms for 10,000 records\n6. Zero negative stock incidents in production\n7. Complete audit trail for all stock movements\n8. Expiry management reduces drug waste by 30%\n9. API documentation complete with OpenAPI/Swagger specs\n10. All role-based access controls functional and tested\n",
  "fileStats": {
    "size": 25696,
    "lines": 384,
    "lastModified": "2025-12-14T13:10:47.921Z"
  },
  "comments": []
}